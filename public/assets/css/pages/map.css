html,body,#map { height:100%; margin:0; }
body {
  background:#BFD9F2;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", sans-serif;
}

/* マーカー */
.marker{
  background-image:url('https://cdn-icons-png.flaticon.com/512/684/684908.png');
  background-size:contain; width:30px; height:30px; cursor:pointer;
}

/* ── ハンバーガー ── */
.hamburger {
  position: fixed; right: 12px; top: 12px; z-index: 1300;
  width: 44px; height: 44px; border: none; border-radius: 12px;
  background: rgba(255,255,255,0.95);
  box-shadow: 0 2px 10px rgba(0,0,0,.15);
  display: grid; place-items: center; cursor: pointer;
  -webkit-tap-highlight-color: transparent;
}
.hamburger-lines { width: 22px; height: 16px; display: grid; gap: 5px; }
.hamburger-lines span { display:block; height:2px; border-radius:2px; background:#111; }

/* ── 右サイドパネル ── */
.side-panel {
  position: fixed;
  top: 0; right: -320px;
  width: 320px; height: 100%;
  background: #fff;
  box-shadow: -4px 0 14px rgba(0,0,0,.15);
  z-index: 1250;
  display: flex;
  flex-direction: column;
  transition: all .25s ease-out;
}
.side-panel.open {
  right: 0;
}
/* ✅ チャット表示時だけ幅を広げる */
.side-panel.chat-mode {
  width: 40vw;
  min-width: 400px;
}

.side-header {
  display:flex; align-items:center; justify-content:space-between;
  padding: 12px 14px; border-bottom:1px solid #e5e7eb;
}
.side-title { font-weight:700; }
.side-close {
  border:none; background:transparent; font-size:16px; cursor:pointer; border-radius:8px;
}
.side-close:hover { background:#f3f4f6; }
.side-nav {
  display:flex; gap:8px; padding: 10px 14px; border-bottom:1px solid #edf0f3;
}
.side-item {
  flex:1;
  background:#f1f5f9;
  border:none; border-radius:999px;
  padding:7px 0;
  font-size:13px; cursor:pointer;
}
.side-item:hover { background:#e2e8f0; }

.side-content {
  padding: 14px;
  flex: 1;
  overflow-y: auto;
}

/* 検索ビュー */
.side-label { font-size:12px; color:#4b5563; margin-bottom:4px; display:block; }
.side-input {
  width:100%; padding:8px 10px; border:1px solid #d1d5db; border-radius:8px; margin-bottom:8px;
}
.side-search-btn {
  width:100%; padding:8px 10px; background:#2563eb; border:none; border-radius:8px; color:#fff; font-weight:600; margin-bottom:8px; cursor:pointer;
}
.side-result { font-size:12px; }

/* 一覧ビュー */
.room-list {
  list-style:none; padding:0; margin:0; display:grid; gap:10px;
}
.room-item {
  border:1px solid #e5e7eb; border-radius:12px; padding:8px 10px; cursor:pointer; background:#fff;
}
.room-item:hover { background:#eff6ff; }
.room-item-title { font-weight:600; font-size:14px; }
.room-item-desc { font-size:12px; color:#6b7280; }

/* チャットビュー */
#view-chat {
  display:flex;
  flex-direction:column;
  gap:10px;
  height:100%;
}
.chat-header {
  display:flex; justify-content:space-between; align-items:center;
}
.chat-room-name { font-weight:700; }
.chat-back {
  border:none; background:#e5e7eb; border-radius:6px; padding:3px 10px; cursor:pointer;
}
.chat-body {
  flex:1; overflow-y:auto;
  border:1px solid #e5e7eb; border-radius:10px; padding:8px; background:#f9fafb;
  display:flex; flex-direction:column; gap:6px;
}
.chat-msg {
  max-width: 85%;
  padding:6px 10px; border-radius:10px; font-size:13px;
}
.chat-msg-other {
  background:#fff; align-self:flex-start;
}
.chat-msg-me {
  background:#2563eb; color:#fff; align-self:flex-end;
}
.chat-input-area {
  display:flex; gap:6px;
}
.chat-input {
  flex:1; padding:6px 10px; border:1px solid #d1d5db; border-radius:8px;
}
.chat-send {
  border:none; background:#2563eb; color:#fff; border-radius:8px; padding:6px 12px; cursor:pointer;
}

/* ── モーダル ── */
.modal-backdrop{
  position: fixed; inset: 0; background: rgba(0,0,0,.35); display:none; z-index: 1200;
}
.modal{
  position: fixed; inset: 0; display:none; place-items: center; z-index: 1210;
}
.modal.active, .modal-backdrop.active{ display: grid; }
.modal-card{
  width: min(680px, 92vw);
  background: #fff; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,.25);
  padding: 20px 20px 16px;
}
.modal-header{ display:flex; align-items:center; justify-content:space-between; margin-bottom:10px; }
.modal-title{ font-size: 18px; font-weight: 700; }
.icon-btn{
  border:none; background:transparent; width:36px; height:36px; display:grid; place-items:center; cursor:pointer; border-radius:8px;
}
.icon-btn:hover{ background:#f2f2f2; }
.form-grid{ display:grid; gap:12px; }
.row{ display:grid; gap:6px; }
label{ font-size: 13px; color:#444; }

input[type="text"], input[type="password"], textarea{
  width:85%;
  padding:10px 12px;
  border:1px solid #d3d6db;
  border-radius:10px;
  font-size:14px;
}
#roomName { width: 85%; }
#roomDesc { width: 90%; min-height: 120px; }

textarea{ resize: vertical; }
.row-inline{ display:flex; gap:12px; align-items:center; }
.muted{ color:#6b7280; font-size:12px; }
.actions{ display:flex; justify-content:flex-end; gap:10px; margin-top:6px; }
.btn{
  padding:10px 14px; border-radius:10px; border:1px solid transparent; font-weight:600; cursor:pointer;
}
.btn-secondary{ background:#fff; border-color:#d3d6db; }
.btn-primary{ background:#2563eb; color:#fff; }

/* maplibre popup ボタン */
.popup-create-btn{
  display:inline-block; padding:8px 10px; border-radius:8px;
  background:#2563eb; color:#fff; font-weight:700; text-decoration:none; cursor:pointer;
}

/* ✅ ここが今回の追加：ポップアップの✕を大きく押しやすくする */
.maplibregl-popup-close-button {
  width: 30px;
  height: 30px;
  font-size: 20px;
  line-height: 24px;
  top: 4px;
  right: 4px;
  background: rgba(255,255,255,0.9);
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,0.1);
  cursor: pointer;
}
.maplibregl-popup-close-button:hover {
  background: #f3f4f6;
}
/* 슬라이더 스타일 */
input[type=range] {
    -webkit-appearance: none;
    width: 100%;
    height: 8px;
    background: #e0e0e0; /* 초기 배경색 (JS로 그라데이션 덮어씌움) */
    border-radius: 5px;
    outline: none;
    cursor: pointer;
    margin-bottom: 5px;
}

input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 20px;
    height: 20px;
    background: #007bff;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 5px rgba(0,0,0,0.2);
    transition: transform 0.1s;
}

input[type=range]::-webkit-slider-thumb:hover {
    transform: scale(1.2);
}